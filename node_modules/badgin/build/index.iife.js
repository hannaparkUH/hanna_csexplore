var badgin=function(e){"use strict";let t=!1;const n=()=>{t||"ExperimentalBadge"in window||"setExperimentalAppBadge"in navigator||(console.warn("Badging API must be enabled. Please check here how you can enable it: https://developers.google.com/web/updates/2018/12/badging-api#use"),t=!0)},i={mediaQuery:null,value:0};function o(){return"ExperimentalBadge"in window&&!!window.ExperimentalBadge}function a(){return"setExperimentalAppBadge"in navigator&&!!navigator.setExperimentalAppBadge&&"clearExperimentalAppBadge"in navigator&&!!navigator.clearExperimentalAppBadge}function l(){return i.mediaQuery||(i.mediaQuery=window.matchMedia("(display-mode: standalone)"),i.mediaQuery.onchange=(e=>{c(i.value)})),i.mediaQuery.matches&&(o()||a())}function c(e){return i.value=e,l()?o()?(window.ExperimentalBadge.set(e),!0):!!a()&&(navigator.setExperimentalAppBadge(e),!0):(n(),!1)}function r(e,t){for(const n of Object.keys(t))t[n]instanceof Object&&Object.assign(t[n],r(e[n],t[n]));return Object.assign(e||{},t),e}function s(e){return void 0!==e&&Number.isInteger(e)&&e>=0}const u=()=>{const e=document.head.getElementsByTagName("link"),t=[];for(let n=0;n<e.length;n++){const i=e[n],o=i.getAttribute("href"),a=i.getAttribute("rel");o&&(a&&-1!==a.split(" ").indexOf("icon")&&t.push(i))}return t},d=()=>{const e=u();let t=null,n=0;for(let i=0;i<e.length;i++){const o=e[i],a=o.getAttribute("sizes");if(!a){t||(t=o,n=0);continue}if("any"===a)return o;const l=parseInt(a.split("x")[0],10);Number.isNaN(l)?t||(t=o,n=0):l>n&&(t=o,n=l)}return t},g=Math.ceil(window.devicePixelRatio)||1,f=16*g,m={canvas:null,context:null,favicons:null,bestFavicon:null,bestFaviconImage:null,value:0,options:{backgroundColor:"#424242",color:"#ffffff",indicator:"!"}},v=(e,t,n)=>{m.canvas&&m.context&&(m.context.clearRect(0,0,f,f),m.context.drawImage(e,0,0,e.width,e.height,0,0,f,f),p(m.context,t,n),(e=>{if(!e)return;for(const e of u())e.parentNode&&e.parentNode.removeChild(e);const t=document.createElement("link");t.id="badgin",t.type="image/x-icon",t.rel="icon favicon",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)})(m.canvas.toDataURL()))},p=(e,t,n)=>{let i="";if(!(i=s(t)?0===t?"":t<100?String(t):"99+":n.indicator))return;const o=i.length-1,a=8*g+4*g*o,l=f-7*g,c=f-a-g,r=16*g,u=16*g,d=5*g;e.save(),e.globalAlpha=1,e.fillStyle=n.backgroundColor,e.strokeStyle=n.backgroundColor,e.lineWidth=g,e.beginPath(),e.moveTo(c+d,l),e.quadraticCurveTo(c,l,c,l+d),e.lineTo(c,r-d),e.quadraticCurveTo(c,r,c+d,r),e.lineTo(u-d,r),e.quadraticCurveTo(u,r,u,r-d),e.lineTo(u,l+d),e.quadraticCurveTo(u,l,u-d,l),e.closePath(),e.fill(),e.restore(),e.save(),e.font=`${7*g}px Arial`,e.fillStyle=n.color,e.textAlign="center",e.textBaseline="top",e.fillText(i,c+a/2+1,9*g+1),e.restore()};function h(){if(!m.context){const e=document.createElement("canvas");e.width=f,e.height=f,m.canvas=e,m.context=e.getContext?e.getContext("2d"):null}return!!m.context&&!!d()}const b={title:null,value:0,options:{indicator:"!"}};function x(e,t){return null===b.title&&(b.title=document.title,Object.defineProperty(document,"title",{get:()=>b.title,set:e=>{b.title=e,function(e,t,n){let i=e;i=s(t)?0===t?e:`(${t}) ${e}`:`(${n.indicator}) ${e}`;const o=document.querySelector("title");o&&(o.childNodes[0].nodeValue=i)}(b.title,b.value,b.options)}})),b.value=e,r(b.options,t||{}),document.title=document.title,!0}return e.clear=function(){l()&&(o()?window.ExperimentalBadge.clear():a()&&navigator.clearExperimentalAppBadge()),function(){if(h()&&m.favicons){for(const e of u())e.parentNode&&e.parentNode.removeChild(e);for(const e of m.favicons)document.head.appendChild(e);m.favicons=null,m.bestFavicon=null,m.bestFaviconImage=null}}(),b.value=0,document.title=document.title},e.set=function(e,t={}){switch(t.method){case void 0:case"Badging":if(c(e)&&"Badging"===t.method)break;case"Favicon":if(function(e,t){if(m.value=e,r(m.options,t||{}),!h())return!1;if(!m.bestFavicon){const e=d();if(e){const t=document.createElement("img");t.width=f,t.height=f,e.href.match(/^data/)||(t.crossOrigin="anonymous"),t.src=e.href,m.bestFavicon=e,m.bestFaviconImage=t}}return m.favicons||(m.favicons=u()),!!m.bestFaviconImage&&(m.bestFaviconImage.complete?(v(m.bestFaviconImage,m.value,m.options),!0):(m.bestFaviconImage.addEventListener("load",function(){v(this,m.value,m.options)}),!0))}(e,t.favicon))break;default:x(e,t.title)}},e}({});
